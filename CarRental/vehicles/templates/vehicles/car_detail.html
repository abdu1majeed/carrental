{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <!-- زر العودة -->
    <a href="{% url 'vehicles:car_list' %}" class="btn btn-outline-secondary mb-4">
        &rarr; العودة للقائمة
    </a>

    <div class="row bg-white shadow-sm rounded p-4">
        <!-- القسم الأيمن: صورة السيارة -->
        <div class="col-md-6 mb-4 mb-md-0">
            {% if car.image %}
                <img src="{{ car.image.url }}" class="img-fluid rounded w-100 shadow-sm" alt="{{ car.name }}">
            {% else %}
                <div class="bg-light d-flex align-items-center justify-content-center rounded" style="height: 400px;">
                    <span class="text-muted">لا توجد صورة متوفرة</span>
                </div>
            {% endif %}
        </div>

        <!-- القسم الأيسر: التفاصيل والإجراءات -->
        <div class="col-md-6">
            <h1 class="display-5 fw-bold text-dark">{{ car.name }} <span class="text-muted fs-4">({{ car.model_year }})</span></h1>
            
            <div class="my-3">
                {% if car.is_available %}
                    <span class="badge bg-success fs-6">متاحة للإيجار</span>
                {% else %}
                    <span class="badge bg-danger fs-6">غير متاحة</span>
                {% endif %}
            </div>

            <h2 class="text-primary fw-bold mb-4">{{ car.daily_price }} <span class="fs-5 text-dark">ريال سعودي / يومياً</span></h2>

            <hr>

            <h5 class="mb-3">المواصفات:</h5>
            <div class="row g-3 mb-4">
                <div class="col-6">
                    <div class="p-3 border rounded bg-light">
                        <small class="text-muted d-block">ناقل الحركة</small>
                        <strong>{{ car.get_transmission_display }}</strong>
                    </div>
                </div>
                <div class="col-6">
                    <div class="p-3 border rounded bg-light">
                        <small class="text-muted d-block">نوع الوقود</small>
                        <strong>{{ car.get_fuel_type_display }}</strong>
                    </div>
                </div>
                <div class="col-6">
                    <div class="p-3 border rounded bg-light">
                        <small class="text-muted d-block">اللون</small>
                        <strong>{{ car.color }}</strong>
                    </div>
                </div>
                <div class="col-6">
                    <div class="p-3 border rounded bg-light">
                        <small class="text-muted d-block">رقم اللوحة</small>
                        <strong>{{ car.plate_number }}</strong>
                    </div>
                </div>
            </div>

            <!-- زر الحجز -->
            {% if car.is_available %}
                <!-- ملاحظة: افترضنا أن اسم الرابط للحجز هو create_booking في تطبيق bookings -->
                <!-- تأكد من تعديل الرابط أدناه ليطابق ما سيكتبه زميلك المسؤول عن الحجوزات -->
                <a href="{% url 'bookings:create_booking' car.id %}" class="btn btn-primary btn-lg w-100 py-3 fw-bold shadow">
                    احجز هذه السيارة الآن
                </a>
            {% else %}
                <button class="btn btn-secondary btn-lg w-100 py-3" disabled>
                    السيارة غير متاحة للحجز حالياً
                </button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}